import{_ as T,u as j,r as w,b as S,e as D,k as v,l,n as u,p as e,x as c,R as O,y as E,A as I,z as N,a2 as L,E as C,t as h,s as b,D as M,V as R,G as z,H as B,O as A,a as U,a0 as P,w as H,U as q,F as $,B as k,Q as F}from"./index-b90f434e.js";const Q={class:"container shadow-3 col-12",style:{"border-radius":"0.5rem",height:"100%",position:"relative"}},W=["src"],G={key:0,style:{width:"100%",display:"flex","justify-content":"center","align-items":"center","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.5rem"}},J={class:"texto",style:{}},K={style:{display:"flex",gap:"1rem",height:"100%","flex-direction":"column","justify-content":"space-between"}},X={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Y={style:{"text-transform":"uppercase"}},Z=["src"],ee={style:{display:"flex","justify-content":"space-between","align-items":"center"}},te={style:{display:"flex","align-items":"center",gap:"1rem"}},se={key:0,class:"text-xl p-0 m-0",style:{"text-decoration":"line-through",opacity:".5"}},oe={cal:"",class:"text-xl p-0 m-0"},re={__name:"TarjetaMenu",props:{product:{type:Object,default:{}},index:{type:Number,default:12}},setup(m){const g=j(),a=i=>{g.addProductToCart(i)},p=w(!1),_=()=>{p.value=!0},y=i=>{g.setCurrentProduct(i),g.setVisible("currentProduct",!0)},o=m;S(()=>{const i=new IntersectionObserver(t=>{t.forEach(s=>{if(s.isIntersecting){const n=s.target;n.src=n.dataset.src,p.value[n.dataset.index]=!0,i.unobserve(n)}})},{threshold:.1});document.querySelectorAll("img.lazy").forEach((t,s)=>{t.dataset.index=s,i.observe(t)})});const r=D(()=>o.product.product_description.substring(0,100)+"...");return(i,t)=>{var d,f,x;const s=v("ProgressSpinner"),n=v("Button");return l(),u("div",Q,[e("div",{class:"imagen",style:{display:"flex","align-items":"center"},onClick:t[0]||(t[0]=V=>y(o.product))},[c(L,{name:"fade"},{default:O(()=>[E(e("img",{onLoad:_,class:I(p.value?"cargado":"sin-cargar"),style:{width:"100%","aspect-ratio":"1 / 1","border-radius":"0.5rem","background-color":"rgb(255, 255, 255)","object-fit":"contain"},src:`https://backend.salchimonster.com/read-product-image/300/${o.product.product_name}`,alt:""},null,42,W),[[N,p.value]])]),_:1}),p.value?C("",!0):(l(),u("div",G,[c(s,{style:{width:"60px",height:"60px"},strokeWidth:"8",animationDuration:".2s","aria-label":"Custom ProgressSpinner"})]))]),e("div",J,[e("div",K,[e("div",X,[e("span",null,[e("b",Y,h(o.product.product_name),1)]),e("img",{class:"character",style:{width:"4rem"},src:`/images/characters/${o.index}.png`,alt:""},null,8,Z)]),e("span",null,h((d=r.value)==null?void 0:d.toLocaleLowerCase()),1),e("div",ee,[c(n,{icon:"pi pi-heart text-xl p-0 m-0",text:"",rounded:"",style:{color:"red"}}),e("div",null,[e("div",te,[(f=o.product)!=null&&f.last_price?(l(),u("h6",se,h((x=o==null?void 0:o.product)==null?void 0:x.last_price),1)):C("",!0),e("h5",oe,[e("b",null,h(b(M)(o.product.price)),1)])])])])])]),c(n,{style:{position:"absolute",right:"-1rem",top:"-1rem"},onClick:t[1]||(t[1]=V=>a(o.product)),severity:"danger",rounded:"",icon:"pi pi-plus text-xl fw-100"})])}}},ie=T(re,[["__scopeId","data-v-8a428178"]]);const ne=m=>(z("data-v-fd97c1d7"),m=m(),B(),m),ae={class:"container shadow-3 col-12",style:{"border-radius":"0.5rem",height:"100%",position:"relative",display:"flex","flex-direction":"column","align-items":"center"}},ce=ne(()=>e("h4",{class:"text-center m-0 p-3",style:{"background-color":"var(--primary-color)",color:"white",width:"min-content",position:"absolute","z-index":"2","border-radius":"10rem"}},[e("b",null," NUEVO ")],-1)),de=["src"],le={key:0,style:{width:"100%",display:"flex","justify-content":"center","align-items":"center","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.5rem"}},ue={class:"texto",style:{width:"100%"}},pe={style:{display:"flex",gap:"1rem",height:"100%","flex-direction":"column","justify-content":"space-between"}},_e={style:{display:"flex","justify-content":"space-between","align-items":"center"}},me={style:{"text-transform":"uppercase"}},ge=["src"],he={style:{display:"flex","justify-content":"space-between","align-items":"c"}},ye={style:{display:"flex","align-items":"center",gap:"1rem"}},fe={class:"text-xl"},xe={__name:"TarjetaMenuDialog",props:{product:{type:Object,default:{}},index:{type:Number,default:12}},setup(m){const g=R(),a=j(),p=t=>{a.addProductToCart(t),g.visible.show_new_product=!1},_=w(!1),y=()=>{_.value=!0},o=t=>{a.setCurrentProduct(t),a.setVisible("currentProduct",!0)},r=m;S(()=>{const t=new IntersectionObserver(s=>{s.forEach(n=>{if(n.isIntersecting){const d=n.target;d.src=d.dataset.src,_.value[d.dataset.index]=!0,t.unobserve(d)}})},{threshold:.1});document.querySelectorAll("img.lazy").forEach((s,n)=>{s.dataset.index=n,t.observe(s)})});const i=D(()=>r.product.product_description.substring(0,100)+"...");return(t,s)=>{var f;const n=v("ProgressSpinner"),d=v("Button");return l(),u("div",ae,[ce,e("div",{class:"imagen",style:{display:"flex","align-items":"center","z-index":"1","min-width":"100%"},onClick:s[0]||(s[0]=x=>o(r.product))},[c(L,{name:"fade"},{default:O(()=>[E(e("img",{onLoad:y,class:I(_.value?"cargado":"sin-cargar"),style:{width:"100%","aspect-ratio":"1 / 1","border-radius":"0.5rem","min-width":"100%","background-color":"rgb(255, 255, 255)","object-fit":"contain"},src:`https://backend.salchimonster.com/read-product-image/300/${r.product.product_name}`,alt:""},null,42,de),[[N,_.value]])]),_:1}),_.value?C("",!0):(l(),u("div",le,[c(n,{style:{width:"60px",height:"60px"},strokeWidth:"8",animationDuration:".2s","aria-label":"Custom ProgressSpinner"})]))]),e("div",ue,[e("div",pe,[e("div",_e,[e("span",null,[e("b",me,h(r.product.product_name),1)]),e("img",{class:"character",style:{width:"4rem"},src:`/images/characters/${r.index}.png`,alt:""},null,8,ge)]),e("span",null,h((f=i.value)==null?void 0:f.toLocaleLowerCase()),1),e("div",he,[c(d,{icon:"pi pi-heart text-2xl",text:"",rounded:"",style:{color:"red"}}),e("div",ye,[e("span",fe,[e("b",null,h(b(M)(r.product.price)),1)])])])])]),c(d,{style:{position:"absolute",right:"-1rem",top:"-1rem"},onClick:s[1]||(s[1]=x=>b(g).visible.show_new_product=!1),severity:"danger",rounded:"",icon:"pi pi-times text-xl fw-100"}),c(d,{style:{width:"100%","font-weight":"bold","border-radius":".5rem"},onClick:s[2]||(s[2]=x=>p(r.product)),severity:"danger",label:"LO QUIERO",icon:"pi pi-shopping-cart"})])}}},ve=T(xe,[["__scopeId","data-v-fd97c1d7"]]),be={class:"grid px-3 pb-8",style:{"max-width":"1024px",margin:"auto",position:"relative"}},we={style:{"max-width":"30rem","background-color":"white",color:"black","border-radius":".5rem"},class:""},$e={style:{position:"absolute",display:"flex",right:"100%",gap:"10rem",height:"100vh","max-width":"100%","justify-content":"space-around","flex-direction":"column","z-index":"9"}},ke=["src"],Ce={style:{position:"absolute",display:"flex",left:"100%",gap:"10rem",height:"100vh","max-width":"100%","justify-content":"space-around","flex-direction":"column","z-index":"9"}},je=["src"],Se=e("p",{class:"text-center text-3xl col-12",style:{"font-weight":"bold",display:"flex",gap:"1rem","align-items":"center"}},[e("div",{style:{width:"100%",height:"5px","background-color":"#ff6200"}}),F(" PROMOCIONES "),e("div",{style:{width:"100%",height:"5px","background-color":"#ff6200"}})],-1),Pe={__name:"sesion_main",setup(m){j();const g=A(),a=R(),p=w([]),_=U();S(async()=>{y(),await P()}),H(()=>_.params.category_id,async()=>{_.params.category_id&&(y(),await P())},{deep:!0});const y=async o=>{const r=g.location.site.site_id,i=15;if(r){a.setLoading(!0,"cargando productos");try{let t=await fetch(`${q}/products-active/category-id/${i}/site/${r}`);if(!t.ok)throw a.setLoading(!1,"cargando productos"),new Error(`HTTP error! status: ${t.status}`);a.setLoading(!1,"cargando productos");let s=await t.json();p.value=s}catch(t){a.setLoading(!1,"cargando productos"),console.error("Error fetching data: ",t)}}};return w(JSON.parse(localStorage.getItem("currentNeigborhood"))),(o,r)=>{const i=v("Dialog");return l(),u("div",be,[c(i,{class:"p-0 m-0",visible:b(a).visible.show_new_product,"onUpdate:visible":r[0]||(r[0]=t=>b(a).visible.show_new_product=t),modal:"",style:{width:"30rem",padding:"0"}},{default:O(()=>[e("div",we,[c(ve,{product:{id:241,product_id:118,site_id:11,status:!0,price:1e4,product_name:"CHOCOMONSTER",product_description:" CHOCORRAMO APANADO",category_id:14,category_name:"NUEVOS"}})])]),_:1},8,["visible"]),e("div",$e,[(l(),u($,null,k([1,2,3,4,5],t=>e("img",{style:{width:"15vw"},src:`/images/characters/line/${t}.png`,alt:""},null,8,ke)),64))]),e("div",Ce,[(l(!0),u($,null,k([1,2,3,4,5].reverse(),t=>(l(),u("img",{style:{width:"15vw"},src:`/images/characters/line/${t}.png`,alt:""},null,8,je))),256))]),Se,(l(!0),u($,null,k(p.value,(t,s)=>(l(),u("div",{key:t.id,class:"col-12 md:col-4 lg:col-3 sm:col-6"},[c(ie,{style:{width:"100%"},id:`tarjeta-${s}`,index:s+1,product:t},null,8,["id","index","product"])]))),128))])}}};export{Pe as default};
