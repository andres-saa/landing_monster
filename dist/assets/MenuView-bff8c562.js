import{_ as he,r as o,u as ve,a as ye,o as be,b as Z,c as $,w,d as T,e as G,f as fe,g as we,h as xe,q as ke,i as Ie,v as N,m as Y,j as K,k as x,l as d,n as u,p as a,t as m,s as l,x as O,y as _,z as Q,A as X,B as ee,F as te,C as oe,U as h,D as i,E as k,G as Se,H as Pe,I as Ce,J as Ae,K as Ee,L as $e,M as Te,N as Ne}from"./index-6b3bda83.js";const ae=y=>(Se("data-v-22fb9546"),y=y(),Pe(),y),Oe={style:{"max-width":"800px","background-color":"var(--primary-color)","border-radius":"1rem"},class:"mx-auto px-3 text-white 0 my-0 grid pb-8 my-6"},Re={class:"header",style:{"justify-content":"space-between","z-index":"99"}},Me={class:"mayuscula nombre col-9 text-6xl lg:text-7xl p-0 text-left text-white",style:{color:"black","line-height":"4rem","font-weight":"bold"}},De={class:"col-12 p-0"},Ve={class:"my-2",style:{display:"flex",gap:"1rem","flex-wrap":"wrap","line-height":"4rem","align-items":"center","justify-content":"end"}},je={key:0,class:"text-5xl md:text-7xl p-0 m-0 text-white",style:{color:"black",opacity:".6","text-decoration":"line-through","font-weight":"bold"}},Le={class:"text-6xl md:text-8xl p-0 m-0 text-black",style:{color:"black","font-weight":"bold"}},Be={class:"col-12 p-0",style:{display:"flex","align-items":"center","border-radius":"0.5rem","flex-direction":"column",gap:"2rem"}},Je=["src"],qe={class:"col-12 p-0 mt-0 shadow-5",style:{display:"flex","align-items":"center","max-height":"45rem","border-radius":"0.5rem"}},ze={style:{width:"100%","aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center"}},Ue=ae(()=>a("p",{class:"col-12 text-4xl p-0",style:{"font-weight":"bold",color:"black"}}," DESCRIPCION ",-1)),We={class:"col-12 text-2xl md:text-4xl p-0",style:{color:"black","text-transform":"capitalize"}},He={style:{color:"black"}},Fe={class:"mb-2"},Ze={class:"mb-2 text-center text-4xl"},Ge={class:"mt-2"},Ye={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Ke={class:"text-xl md:text-4xl adicion text-black",style:{"text-transform":"lowercase"}},Qe={key:0,style:{display:"flex","align-items":"center"}},Xe={key:0,class:"pl-2 py-2 text-xl"},et={key:1,class:"pl-2 py-2 text-2xl"},tt=ae(()=>a("hr",null,null,-1)),ot={__name:"MenuView",setup(y){const p=o([]),s=ve();o({});const I=o(),S=o(),v=ye(),b=o(),R=o(),re=async e=>{try{let t=await fetch(`${h}/product/${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json())[0]}catch(t){console.error("Error fetching data: ",t)}};be(async()=>{const e=v.params.product_id;if(e){const t=await re(e);console.log(t);const r={id:t.product_instance_id,product_id:t.product_id,site_id:t.site_id,status:!0,price:t.product_instance_price,product_name:t.product_name,product_description:t.product_description,category_id:t.category_id,category_name:t.category_name,last_price:t.last_price};s.currentProduct={...r}}}),new Audio("/sounds/sarpazo.mp3");const c=o({}),f=o(!1),se=()=>{f.value=!0};o(!1),o(!1);const ne=(e,t)=>{if(e.checked){const r={id:e.aditional_item_instance_id,name:e.aditional_item_name,price:e.aditional_item_price,group:t};c.value[r.id]={...r,quantity:e.quantity||1}}else delete c.value[e.aditional_item_instance_id]},le=e=>{if(e.checked){const t={id:e.aditional_item_instance_id,name:e.aditional_item_name,price:e.aditional_item_price};c.value[t.id].quantity++}},ce=e=>{c.value[e.aditional_item_instance_id].quantity>1&&c.value[e.aditional_item_instance_id]&&c.value[e.aditional_item_instance_id].quantity--},P=e=>{const t=Object.values(c.value);s.addProductToCart(e),t.forEach(r=>{s.addAdditionToCart(r),console.log(r)}),c.value={},s.setVisible("currentProduct",!1),T.push("/cart")};Z(async()=>{const e=await s.currentProduct.id;e&&(p.value=await $.getAditional(e))}),w(()=>s.currentProduct,async()=>{const e=await s.currentProduct.id;e&&(p.value=await $.getAditional(e))}),w(()=>s.visibles.addAdditionToCart,async e=>{if(!e)c.value={},p.value=[];else{const t=await s.currentProduct.id;t&&(p.value=await $.getAditional(t))}},{deep:!0}),v.matched.some(e=>e.path==="/admin-products")||v.matched.some(e=>e.path.startsWith("/admin-products/"))||v.matched.some(e=>e.path==="/entregas")||v.matched.some(e=>e.path.startsWith("/entregas/")),o(T.currentRoute);const C=o(1),A=o(window.innerWidth);console.log(A.value);const M=()=>{A.value=window.innerWidth},ie=G(()=>A.value<768);fe(),window.addEventListener("resize",M),we(()=>{window.removeEventListener("resize",M)});const D=localStorage.getItem("version_tienda");D?parseInt(D)!==C.value&&(localStorage.setItem("version_tienda",C.value),localStorage.removeItem("menu"),localStorage.removeItem("cart"),localStorage.removeItem("currentNeigborhood"),xe(),console.log("Version updated. Do additional actions here.")):localStorage.setItem("version_tienda",C.value);const V=async()=>{if(!i.value.grupo_salsa_id){I.value=[];return}try{let e=await fetch(`${h}/grupo-salsas/${i.value.grupo_salsa_id}/salsas`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let t=await e.json();I.value=t}catch(e){console.error("Error fetching data: ",e)}},j=async()=>{if(!i.value.grupo_cambio_id){S.value=[];return}try{let e=await fetch(`${h}/grupo-cambios/${i.value.grupo_cambio_id}/cambios`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let t=await e.json();S.value=t}catch(e){console.error("Error fetching data: ",e)}},L=async()=>{if(!i.value.grupo_topping_id){b.value=[];return}try{let e=await fetch(`${h}/grupo-toppings/${i.value.grupo_topping_id}/toppings`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let t=await e.json();b.value=t}catch(e){console.error("Error fetching data: ",e)}},B=async()=>{if(!i.value.grupo_acompanante_id){b.value=[];return}try{let e=await fetch(`${h}/grupo-acompanantes/${i.value.grupo_acompanante_id}/acompanantes`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let t=await e.json();R.value=t}catch(e){console.error("Error fetching data: ",e)}},J=async()=>{if(!i.value.grupo_adicional_id){p.value=[];return}try{let e=await fetch(`${h}/grupo-adicionales/${i.value.grupo_adicional_id}/adicionales`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let t=await e.json();p.value=t}catch(e){console.error("Error fetching data: ",e)}};o(localStorage.getItem("currentNeigborhood")),Z(()=>{L(),V(),j(),J(),B();const e=JSON.parse(localStorage.getItem("cart")),t=e&&e.products?e.products.length:0;if(ke.value=t,localStorage.getItem("cart")&&(Ie.value=JSON.parse(localStorage.getItem("cart"))),localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify({products:[],total:0})),console.log(JSON.parse(localStorage.getItem("menu"))),localStorage.getItem("menu")&&localStorage.getItem("versionMenu")&&parseFloat(localStorage.getItem("versionMenu"))==N.value){const r=parseFloat(localStorage.getItem("versionMenu"));console.log(r,N.value),console.log("habia"),Y.value[0].menus=JSON.parse(localStorage.getItem("menu"))}else Y.value[0].menus=K,localStorage.setItem("menu",JSON.stringify(K)),localStorage.setItem("versionMenu",N.value),console.log("nuevo menu"),localStorage.removeItem("cart"),localStorage.removeItem("currentNeigborhood")}),o({Caney:"https://drive.google.com/file/d/1LpmzmgBDOR-YAT4_SstyAldl1Nid-CF2/view?usp=sharing","La Flora":"https://backend.novatocode.online/read-site-cover/IMPERIO%20CANEY",Palmira:"	https://backend.novatocode.online/read-site-cover/IMPERIO%20PALMIRA",Bretaña:"https://backend.novatocode.online/read-site-cover/IMPERIO%20BRETA%C3%91A",Jamundi:"https://backend.novatocode.online/read-site-cover/IMPERIO%20JAMUNDI",Tulua:"https://backend.novatocode.online/read-site-cover/IMPERIO%20TULUA",default:""}),o({site:{name:"default"}});const de=o();o(!1);const q=o({}),ue=()=>{const e=[];q.value.sites.map(t=>{t.neigborhoods.map(r=>{e.push({name:r.name,neigborhood:r,site:t}),console.log(t)})}),de.value=e};w(q,()=>{ue()}),w(Ne,(e,t)=>{Ce.value=[],Ae.value=[],Ee.value=[],$e.value=[],Te.value=[],S.value=[],I.value=[],b.value=[],p.value=[],R.value=[],L(),V(),j(),J(),B()}),o(localStorage.getItem("currenSiteWsp")),console.log(T.currentRoute),G(()=>({"layout-topbar-menu-mobile-active":pe.value}));const pe=o(!1);return o(JSON.parse(localStorage.getItem("currentNeigborhood"))),(e,t)=>{var z,U,W;const r=x("Button"),me=x("ProgressSpinner"),_e=x("Checkbox"),ge=x("InputText");return d(),u("div",Oe,[a("div",Re,[a("p",Me,m(l(s).currentProduct.product_name),1)]),a("div",De,[a("div",Ve,[l(s).currentProduct.last_price?(d(),u("p",je,m(`‎ ${l(k)(l(s).currentProduct.last_price)} ‎ `),1)):O("",!0),a("p",Le,m(`${l(k)(l(s).currentProduct.price)} `),1)]),a("div",Be,[_(r,{rounded:"",class:"text-xl md:text-5xl",onClick:t[0]||(t[0]=g=>P(l(s).currentProduct)),label:"REALIZAR PEDIDO",style:{"pointer-events":"all",border:"none",color:"white","background-color":"black",width:"100%",padding:"0.5rem 3rem","font-weight":"bold"}}),Q(a("img",{class:ee([f.value?"cargado":"sin-cargar","col-12 p-0"]),onload:se,src:`https://backend.salchimonster.com/read-product-image/600/${l(s).currentProduct.product_name}`,alt:"",style:{width:"100%","object-fit":"contain","aspect-ratio":"1/1","border-radius":"2rem"}},null,10,Je),[[X,f.value]]),_(r,{rounded:"",class:"text-xl md:text-5xl",onClick:t[1]||(t[1]=g=>P(l(s).currentProduct)),label:"REALIZAR PEDIDO",style:{"pointer-events":"all",border:"none",color:"white","background-color":"black",width:"100%",padding:"0.5rem 3rem","font-weight":"bold"}})]),Q(a("div",qe,[a("div",ze,[_(me,{style:{width:"100px",height:"100px"},strokeWidth:"5",animationDuration:".2s","aria-label":"Custom ProgressSpinner"})])],512),[[X,!f.value]]),a("div",{class:ee(["col-12 p-0 my-5",ie.value?"static":"scroll"]),style:{}},[Ue,a("p",We,m((W=(U=(z=l(s))==null?void 0:z.currentProduct)==null?void 0:U.product_description)==null?void 0:W.toLowerCase()),1),a("div",He,[(d(!0),u(te,null,oe(p.value,g=>(d(),u("div",{key:g.category},[a("div",Fe,[a("span",Ze,[a("b",null,m(g.category),1)]),a("div",Ge,[(d(!0),u(te,null,oe(g.items,n=>{var H,F;return d(),u("div",{key:n.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[_(_e,{class:"my-2",style:{color:"black"},binary:!0,modelValue:n.checked,"onUpdate:modelValue":E=>n.checked=E,onChange:()=>ne(n,g.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),a("div",Ye,[a("span",Ke,m(n.aditional_item_name),1),n.checked?(d(),u("span",Qe,[n.aditional_item_price>0?(d(),u("span",Xe,[a("b",null,m(l(k)(n.aditional_item_price*((H=c.value[n.aditional_item_instance_id])==null?void 0:H.quantity))),1)])):O("",!0),_(r,{onClick:E=>ce(n),class:"ml-2",style:{width:"2rem",height:"1.5rem",border:"none","background-color":"black"},icon:"pi pi-minus"},null,8,["onClick"]),_(ge,{modelValue:(F=c.value[n.aditional_item_instance_id])==null?void 0:F.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem",color:"black"},class:"p-0 text-center"},null,8,["modelValue"]),_(r,{onClick:E=>le(n),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","background-color":"black"},icon:"pi pi-plus"},null,8,["onClick"])])):n.aditional_item_price>0?(d(),u("span",et,[a("b",null,m(l(k)(n.aditional_item_price)),1)])):O("",!0)])])}),128)),tt])])]))),128))]),_(r,{rounded:"",class:"text-xl md:text-5xl",onClick:t[2]||(t[2]=g=>P(l(s).currentProduct)),label:"REALIZAR PEDIDO",style:{"pointer-events":"all",color:"white","background-color":"black",width:"100%",padding:"0.5rem 3rem","font-weight":"bold"}})],2)])])}}},rt=he(ot,[["__scopeId","data-v-22fb9546"]]);export{rt as default};
